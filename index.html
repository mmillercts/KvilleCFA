<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chick-fil-A Kernersville Employee Portal</title>
    <style>
        @font-face {
        font-family: 'Apercu';
        src: url('./Apercu-Medium.otf') format('opentype');
        font-weight: 500;
        font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Apercu', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #ffffff;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: #fff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }

        .logo-icon {
            width: 225px;
            height: 150px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: #DD0033;
            aspect-ratio: 1 / 1;
        }

        .logo-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .logo-text {
            font-size: 30px;
            font-weight: bold;
            color: #DD0033;
        }

        .nav {
            display: flex;
            gap: 30px;
        }

        .nav a {
            text-decoration: none;
            color: #666;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .nav a:hover,
        .nav a.active {
            background: #DD0033;
            color: white;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 100px;
        }
        .admin-badge {
            background: #DD0033;
            color: white;
            padding: 15px 15px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: bold;
        }

        /* Main Content */
        .main {
            padding: 40px 0;
            min-height: calc(100vh - 80px);
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .page-title {
            font-size: 32px;
            font-weight: bold;
            color: #333;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-btn {
            background: #DD0033;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
        }

        .admin-btn:hover {
            background: #c41e24;
        }

        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 30px;
        }

        /* THEMED CARDS - White background with red outline */
        .card {
            background: white;
            border: 2px solid #DD0033;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(227, 30, 36, 0.1);
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(227, 30, 36, 0.2);
        }

        .card-header {
            padding: 20px;
            background: #DD0033;
            color: white;
        }

        .card-body {
            padding: 20px;
            background: white;
        }

        .card h3 {
            margin-bottom: 12px;
            color: #333;
            font-size: 18px;
        }

        .card-header h3 {
            color: white;
        }

        .card p {
            color: #666;
            margin-bottom: 15px;
        }

        .card-header p {
            color: rgba(255,255,255,0.9);
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            background: #DD0033;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
            margin: 5px;
        }

        .btn:hover {
            background: #c41e24;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 14px;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid #DD0033;
            color: #DD0033;
        }

        .btn-outline:hover {
            background: #DD0033;
            color: white;
        }

        .btn-cancel {
            background: #6c757d;
            color: white;
        }

        .btn-cancel:hover {
            background: #5a6268;
        }

        /* Admin Controls */
        .admin-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
        }

        .card:hover .admin-controls,
        .doc-item:hover .admin-controls,
        .photo-item:hover .admin-controls,
        .event:hover .admin-controls {
            opacity: 1;
        }

        .admin-controls button {
            padding: 4px 8px;
            font-size: 12px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .admin-controls button:hover {
            background: #DD0033;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: white;
            border: 2px solid #DD0033;
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #DD0033;
        }

        .modal-header h3 {
            color: #DD0033;
            font-size: 24px;
            margin: 0;
            flex: 1;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: #DD0033;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: #DD0033;
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-file {
            width: 100%;
            padding: 12px;
            border: 2px dashed #DD0033;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .form-file:hover {
            background: #f8f9fa;
        }

        .form-file input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .file-preview {
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #DD0033;
        }

        .file-preview img {
            max-width: 100px;
            max-height: 100px;
            border-radius: 6px;
            margin: 5px;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        /* Time Input Styling */
        .time-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        /* Quick Access Grid */
        .quick-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }

        .quick-item {
            padding: 20px;
            background: #f8f9fa;
            border: 2px solid #DD0033;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .quick-item:hover {
            background: #DD0033;
            color: white;
            transform: translateY(-3px);
        }

        .quick-item .icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .quick-item .admin-controls {
            position: absolute;
            top: 5px;
            right: 5px;
        }

        /* Announcements */
        .announcement-item {
            padding: 12px;
            background: #f8f9fa;
            border: 1px solid #DD0033;
            border-radius: 6px;
            margin-bottom: 10px;
            position: relative;
        }

        .announcement-item:hover .admin-controls {
            opacity: 1;
        }

        /* Document Categories */
        .document-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .document-category {
            border: 2px solid #DD0033;
            border-radius: 12px;
            overflow: hidden;
            background: white;
        }

        .document-category-header {
            background: #DD0033;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .document-category-header h3 {
            margin: 0;
            font-size: 18px;
        }

        .document-category-body {
            padding: 20px;
        }

        /* Documents List */
        .doc-list {
            list-style: none;
        }

        .doc-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #f8f9fa;
            border: 1px solid #DD0033;
            border-radius: 6px;
            margin-bottom: 8px;
            transition: transform 0.3s;
            position: relative;
        }

        .doc-item:hover {
            transform: translateX(5px);
        }

        .doc-name {
            flex: 1;
            font-weight: 500;
        }

        .doc-actions {
            display: flex;
            gap: 8px;
        }

        .doc-item .admin-controls {
            position: static;
            opacity: 1;
            margin-left: 10px;
        }

        /* Photo Categories */
        .photo-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .photo-category {
            border: 2px solid #DD0033;
            border-radius: 12px;
            overflow: hidden;
            background: white;
        }

        .photo-category-header {
            background: #DD0033;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .photo-category-header h3 {
            margin: 0;
            font-size: 18px;
        }

        .photo-category-body {
            padding: 20px;
        }

        /* Photos Grid */
        .photos {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .photo-item {
            background: white;
            border: 2px solid #DD0033;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(227, 30, 36, 0.1);
            cursor: pointer;
            transition: transform 0.3s;
            position: relative;
        }

        .photo-item:hover {
            transform: scale(1.02);
        }

        .photo-placeholder {
            height: 150px;
            background: linear-gradient(45deg, #f8f9fa, #e9ecef);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
        }

        .photo-caption {
            padding: 10px;
        }

        .photo-caption h4 {
            font-size: 14px;
            margin-bottom: 5px;
        }

        .photo-caption p {
            font-size: 12px;
            color: #666;
        }

        /* Team Member Drag & Drop */
        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            min-height: 120px;
            margin-bottom: 20px;
            padding: 15px;
            border: 2px dashed rgba(227, 30, 36, 0.3);
            border-radius: 8px;
            background: rgba(227, 30, 36, 0.02);
        }

        .org-level {
            margin-bottom: 25px;
        }

        .org-level h4 {
            color: #DD0033;
            margin-bottom: 15px;
            padding: 12px;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border-radius: 8px;
            border-left: 4px solid #DD0033;
            font-size: 16px;
            font-weight: bold;
        }

        .org-level .team-grid.drag-over {
            background: rgba(227, 30, 36, 0.1);
            border-color: #DD0033;
        }

        .team-member {
            cursor: move;
            user-select: none;
            min-width: 180px;
        }

        .team-member.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }

        .team-avatar {
            width: 60px;
            height: 60px;
            background: #DD0033;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
            margin: 0 auto 12px;
            overflow: hidden;
        }

        .team-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Benefits Categories */
        .benefits-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .benefits-category {
    background: white;
    border: 2px solid #E31E24;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(227, 30, 36, 0.1);
    overflow: hidden;
    transition: transform 0.3s, box-shadow 0.3s;
        }

        .benefits-category-header {
            background: #DD0033;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .benefits-category-header h3 {
            margin: 0;
            font-size: 24px;
        }

        .benefits-category-body {
            padding: 20px;
        }

        .benefits-item {
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid #DD0033;
            border-radius: 8px;
            background: #f8f9fa;
            position: relative;
        }

        .benefits-item:hover .admin-controls {
            opacity: 1;
        }

        /* Calendar Tabs */
        .calendar-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #DD0033;
        }

        .calendar-tab {
            padding: 12px 24px;
            background: #f8f9fa;
            border: 2px solid #DD0033;
            border-bottom: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .calendar-tab.active {
            background: #DD0033;
            color: white;
        }

        .calendar-tab:hover {
            background: #DD0033;
            color: white;
        }

        /* Calendar Container */
        .calendar-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        .calendar {
            background: white;
            border: 2px solid #DD0033;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(227, 30, 36, 0.1);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: #DD0033;
            color: white;
        }

        .calendar-nav {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
        }

        .calendar-nav:hover {
            background: rgba(255,255,255,0.3);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #eee;
            cursor: pointer;
            transition: background 0.3s;
            position: relative;
            flex-direction: column;
            font-size: 14px;
        }

        .calendar-day:hover {
            background: #f8f9fa;
        }

        .calendar-day.today {
            background: linear-gradient(135deg, #87CEEB, #4682B4);
            color: white;
            font-weight: bold;
        }

        .calendar-day.has-events {
            background: linear-gradient(135deg, #DD0033, #c41e24);
            color: white;
        }

        .calendar-day.today.has-events {
            background: linear-gradient(135deg, #4682B4, #DD0033);
            color: white;
        }

        .calendar-day .event-count {
            font-size: 10px;
            background: rgba(255,255,255,0.9);
            color: #DD0033;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 2px;
            font-weight: bold;
        }

        .events-sidebar {
            background: white;
            border: 2px solid #DD0033;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(227, 30, 36, 0.1);
            height: fit-content;
        }

        .event {
            padding: 12px;
            background: #f8f9fa;
            border: 1px solid #DD0033;
            border-radius: 6px;
            margin-bottom: 10px;
            border-left: 4px solid #DD0033;
            position: relative;
        }

        .event-date {
            font-size: 12px;
            color: #666;
            font-weight: 600;
        }

        .event-title {
            font-weight: 600;
            margin: 4px 0;
        }

        /* Hide inactive calendar content */
        .calendar-content {
            display: none;
        }

        .calendar-content.active {
            display: block;
        }

        /* Delete Animation */
        .deleting {
            transition: all 0.4s ease-out;
            opacity: 0;
            transform: scale(0.9) translateY(-20px);
        }

        /* Mobile Responsive */
        .mobile-menu {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
        }

        .mobile-menu span {
            display: block;
            width: 25px;
            height: 3px;
            background: #333;
            margin: 5px 0;
            transition: 0.3s;
        }

                @media (max-width: 768px) {
            .logo-icon {
                width: 50px;
                height: 50px;
            }
            
            .logo-text {
                font-size: 14px;
            }
            
            .header-content {
                position: relative;
                padding: 10px 0;
            }

            .user-info {
                display: none;
            }
            .mobile-menu {
                position: absolute;
                top: 15px;
                right: 20px;
                z-index: 1100;
                display: block;
            }
            
            .nav {
                position: fixed;
                top: 0;
                right: -100%;
                width: 250px;
                height: 100vh;
                background: white;
                flex-direction: column;
                padding: 80px 20px 20px;
                box-shadow: -5px 0 15px rgba(0,0,0,0.1);
                transition: right 0.3s;
                z-index: 1000;
            }
            
            .nav.active {
                right: 0;
            }

            .cards {
                grid-template-columns: 1fr;
            }

            .calendar-container {
                grid-template-columns: 1fr;
            }

            .document-categories {
                grid-template-columns: 1fr;
            }

            .photo-categories {
                grid-template-columns: 1fr;
            }

            .calendar-tabs {
                flex-direction: column;
            }

            .quick-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .photos {
                grid-template-columns: 1fr;
            }

            .benefits-categories {
                grid-template-columns: 1fr;
            }

            .team-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .page-title {
                font-size: 24px;
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .doc-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .doc-actions {
                align-self: flex-end;
            }

            .modal {
                padding: 20px;
            }

            .time-inputs {
                grid-template-columns: 1fr;
            }
        }

        .hidden {
            display: none !important;
        }
                .logout-link {
            color: #DD0033;
            font-weight: bold;
            border: 2px solid #DD0033;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.3s;
        }
        
        .logout-link:hover {
            background: #DD0033;
            color: white;
        }
    </style>
</head>
<body>
        <!-- Place this just inside <body>, before <div id="mainPortal"> -->
    <div id="loginScreen" style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,#fff 0%,#DD0033 100%);z-index:3000;display:flex;align-items:center;justify-content:center;flex-direction:column;">
        <div style="background:white;padding:40px 30px 30px 30px;border-radius:18px;box-shadow:0 8px 40px rgba(0,0,0,0.13);min-width:320px;max-width:95vw;">
            <div style="display:flex;flex-direction:column;align-items:center;margin-bottom:25px;">
                <div style="width:80px;height:80px;background:#DD0033;border-radius:50%;display:flex;align-items:center;justify-content:center;overflow:hidden;margin-bottom:10px;">
                    <img src="./IMG_3606.JPG" alt="Chick-fil-A Logo" style="width:100%;height:100%;object-fit:cover;">
                </div>
                <div style="font-size:1.5rem;font-weight:bold;color:#DD0033;text-align:center;">Chick-fil-A Kernersville<br>Employee Portal</div>
            </div>
            <form id="loginForm" autocomplete="off">
                <div style="margin-bottom:18px;">
                    <label style="font-weight:600;color:#333;">Username</label>
                    <input type="text" id="loginUsername" class="form-input" style="width:100%;margin-top:6px;" required autocomplete="off">
                </div>
                <div style="margin-bottom:18px;">
                    <label style="font-weight:600;color:#333;">Password</label>
                    <input type="password" id="loginPassword" class="form-input" style="width:100%;margin-top:6px;" required autocomplete="off">
                </div>
                <div id="loginError" style="color:#DD0033;font-size:14px;min-height:18px;margin-bottom:10px;display:none;"></div>
                <button type="submit" class="btn" style="width:100%;font-size:1.1rem;">Login</button>
            </form>
        </div>
    </div>
    <!-- filepath: c:\Users\mmill\OneDrive\CFA Website\New7.7.2025\7.7.25.html -->
    <!-- Main Portal -->
    <div id="mainPortal">
        <header class="header">
            <div class="container">
                <div class="header-content">
                    <div class="logo" style="cursor:pointer;" onclick="goHome()">
                        <div class="logo-icon">
                            <img src="./IMG_3606.JPG" alt="Chick-fil-A Logo">
                        </div>
                        <div class="logo-text">Chick-fil-A Kernersville</div>
                    </div>
                    
                    <nav class="nav" id="nav">
                        <a class="nav-link active" onclick="showSection('home')">Home</a>
                        <a class="nav-link" onclick="showSection('about')">About</a>
                        <a class="nav-link" onclick="showSection('team')">Team</a>
                        <a class="nav-link" onclick="showSection('development')">Development</a>
                        <a class="nav-link" onclick="showSection('benefits')">Benefits</a>
                        <a class="nav-link" onclick="showSection('documents')">Documents</a>
                        <a class="nav-link" onclick="showSection('photos')">Photos</a>
                        <a class="nav-link" onclick="showSection('calendar')">Calendar</a>
                        <a class="nav-link logout-link" onclick="logout()">Log Out</a>
                    </nav>
                    
    <div class="user-info">
        <span class="admin-badge">Admin</span>
        <span>Welcome, Admin!</span>
        <button class="btn btn-small btn-outline" onclick="logout()">Log Out</button>
    </div>
                    
                    <button class="mobile-menu" id="mobileMenu">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
            </div>
        </header>

        <main class="main">
            <div class="container">
                <!-- Home Section -->
                <section id="homeSection" class="section active">
                    <div class="page-title">
                        Welcome to Your Employee Portal
                        <button class="admin-btn" onclick="addContent('home')">Add Content</button>
                    </div>
                    
                    <div class="cards" id="homeCards">
                        <div class="card" data-id="welcome">
                            <div class="admin-controls">
                                <button class="edit-btn" onclick="editContent(this, 'welcome')">Edit</button>
                                <button class="delete-btn" onclick="deleteContent(this, 'welcome')">Delete</button>
                            </div>
                            <div class="card-header">
                                <h3>Welcome Team Members!</h3>
                                <p>Your one-stop destination for all employee resources, benefits, and company information.</p>
                            </div>
                        </div>

                        <div class="card" data-id="quick">
                            <div class="admin-controls">
                                <button class="edit-btn" onclick="editQuickAccess(this)">Edit</button>
                                <button class="delete-btn" onclick="deleteContent(this, 'quick')">Delete</button>
                            </div>
                            <div class="card-body">
                                <h3>Quick Access</h3>
                                <p>Navigate to important sections quickly and easily.</p>
                                <div class="quick-grid" id="quickGrid">
                                    <div class="quick-item" onclick="showSection('benefits')" data-id="benefits">
                                        <div class="admin-controls">
                                            <button onclick="event.stopPropagation(); editQuickItem(this, 'benefits')">Edit</button>
                                            <button onclick="event.stopPropagation(); deleteQuickItem(this)">Delete</button>
                                        </div>
                                        <div class="icon">💼</div>
                                        <div>Benefits</div>
                                    </div>
                                    <div class="quick-item" onclick="showSection('calendar')" data-id="calendar">
                                        <div class="admin-controls">
                                            <button onclick="event.stopPropagation(); editQuickItem(this, 'calendar')">Edit</button>
                                            <button onclick="event.stopPropagation(); deleteQuickItem(this)">Delete</button>
                                        </div>
                                        <div class="icon">📅</div>
                                        <div>Calendar</div>
                                    </div>
                                    <div class="quick-item" onclick="showSection('documents')" data-id="documents">
                                        <div class="admin-controls">
                                            <button onclick="event.stopPropagation(); editQuickItem(this, 'documents')">Edit</button>
                                            <button onclick="event.stopPropagation(); deleteQuickItem(this)">Delete</button>
                                        </div>
                                        <div class="icon">📄</div>
                                        <div>Documents</div>
                                    </div>
                                    <div class="quick-item" onclick="showSection('development')" data-id="development">
                                        <div class="admin-controls">
                                            <button onclick="event.stopPropagation(); editQuickItem(this, 'development')">Edit</button>
                                            <button onclick="event.stopPropagation(); deleteQuickItem(this)">Delete</button>
                                        </div>
                                        <div class="icon">🎓</div>
                                        <div>Training</div>
                                    </div>
                                </div>
                                 <button class="btn btn-small admin-only" onclick="addQuickItem()">Add Quick Link</button>
                            </div>
                        </div>

                        <div class="card" data-id="announcements">
                            <div class="admin-controls">
                                <button class="edit-btn" onclick="editContent(this, 'announcements')">Edit</button>
                                <button class="delete-btn" onclick="deleteContent(this, 'announcements')">Delete</button>
                            </div>
                            <div class="card-body">
                                <h3>Announcements</h3>
                                <p>Stay updated with the latest news and announcements.</p>
                                <div id="announcementsList">                                   
                                </div>
                                <button class="btn btn-small admin-only" onclick="addAnnouncement()">Add Announcement</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- About Section -->
                <section id="aboutSection" class="section">
                    <div class="page-title">
                        About Chick-fil-A
                        <button class="admin-btn" onclick="addContent('about')">Add Content</button>
                    </div>
                    
                    <div class="cards" id="aboutCards">
                        <div class="card" data-id="mission">
                            <div class="admin-controls">
                                <button class="edit-btn" onclick="editContent(this, 'mission')">Edit</button>
                                <button class="delete-btn" onclick="deleteContent(this, 'mission')">Delete</button>
                            </div>
                            <div class="card-body">
                                <h3>Our Mission</h3>
                                <p>To glorify God by being a faithful steward of all that is entrusted to us and to have a positive influence on all who come into contact with Chick-fil-A.</p>
                            </div>
                        </div>

                        <div class="card" data-id="vision">
                            <div class="admin-controls">
                                <button class="edit-btn" onclick="editContent(this, 'vision')">Edit</button>
                                <button class="delete-btn" onclick="deleteContent(this, 'vision')">Delete</button>
                            </div>
                            <div class="card-body">
                                <h3>Our Vision</h3>
                                <p>To be America's best quick-service restaurant at getting better.</p>
                            </div>
                        </div>

                        <div class="card" data-id="values">
                            <div class="admin-controls">
                                <button class="edit-btn" onclick="editContent(this, 'values')">Edit</button>
                                <button class="delete-btn" onclick="deleteContent(this, 'values')">Delete</button>
                            </div>
                            <div class="card-body">
                                <h3>Our Values</h3>
                                <p><strong>Service:</strong> We exist to serve others with excellence. <strong>Teamwork:</strong> We collaborate to achieve our goals. <strong>Growth:</strong> We continuously improve ourselves.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Team Section -->
                <section id="teamSection" class="section">
                    <div class="page-title">
                        Our Team
                        <button class="admin-btn" onclick="addTeamMember()">Add Team Member</button>
                    </div>
                    
                    <div id="orgChart">
                        <div class="org-level" data-level="1">
                            <h4>Owner/Operator</h4>
                            <div class="team-grid" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <div class="card team-member" draggable="true" data-id="owner" ondragstart="drag(event)">
                                    <div class="admin-controls">
                                        <button class="edit-btn" onclick="editTeamMember(this, 'owner')">Edit</button>
                                        <button class="delete-btn" onclick="deleteTeamMember(this, 'owner')">Delete</button>
                                    </div>
                                    <div class="card-body" style="text-align: center;">
                                        <div class="team-avatar">OW</div>
                                        <h3>Operator/Owner</h3>
                                        <p>Restaurant Owner</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="org-level" data-level="2">
                            <h4>Executive Director</h4>
                            <div class="team-grid" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <div class="card team-member" draggable="true" data-id="exec-director" ondragstart="drag(event)">
                                    <div class="admin-controls">
                                        <button class="edit-btn" onclick="editTeamMember(this, 'exec-director')">Edit</button>
                                        <button class="delete-btn" onclick="deleteTeamMember(this, 'exec-director')">Delete</button>
                                    </div>
                                    <div class="card-body" style="text-align: center;">
                                        <div class="team-avatar">ED</div>
                                        <h3>Executive Director</h3>
                                        <p>Executive Leadership</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="org-level" data-level="3">
                            <h4>Globals</h4>
                            <div class="team-grid" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                        </div>

                        <div class="org-level" data-level="4">
                            <h4>Operations Directors</h4>
                            <div class="team-grid" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                        </div>

                        <div class="org-level" data-level="5">
                            <h4>Directors</h4>
                            <div class="team-grid" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
                        </div>

                        <div class="org-level" data-level="6">
                            <h4>Managers</h4>
                            <div class="team-grid" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <div class="card team-member" draggable="true" data-id="gm" ondragstart="drag(event)">
                                    <div class="admin-controls">
                                        <button class="edit-btn" onclick="editTeamMember(this, 'gm')">Edit</button>
                                        <button class="delete-btn" onclick="deleteTeamMember(this, 'gm')">Delete</button>
                                    </div>
                                    <div class="card-body" style="text-align: center;">
                                        <div class="team-avatar">GM</div>
                                        <h3>General Manager</h3>
                                        <p>Operations Leader</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="org-level" data-level="7">
                            <h4>Team Leaders</h4>
                            <div class="team-grid" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <div class="card team-member" draggable="true" data-id="team" ondragstart="drag(event)">
                                    <div class="admin-controls">
                                        <button class="edit-btn" onclick="editTeamMember(this, 'team')">Edit</button>
                                        <button class="delete-btn" onclick="deleteTeamMember(this, 'team')">Delete</button>
                                    </div>
                                    <div class="card-body" style="text-align: center;">
                                        <div class="team-avatar">TL</div>
                                        <h3>Team Leaders</h3>
                                        <p>Front & Back of House</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Development Section -->
                <section id="developmentSection" class="section">
                    <div class="page-title">
                        My Development
                        <button class="admin-btn" onclick="addContent('development')">Add Content</button>
                    </div>
                    
                    <div class="cards" id="developmentCards">
                        <div class="card" data-id="orientation">
                            <div class="admin-controls">
                                <button class="edit-btn" onclick="editDevelopmentContent(this, 'orientation')">Edit</button>
                                <button class="delete-btn" onclick="deleteContent(this, 'orientation')">Delete</button>
                            </div>
                            <div class="card-body">
                                <h3>New Team Member Orientation</h3>
                                <p>Complete introduction to Chick-fil-A values and procedures.</p>
                                <div class="development-links"></div>
                            </div>
                        </div>

                        <div class="card" data-id="safety">
                            <div class="admin-controls">
                                <button class="edit-btn" onclick="editDevelopmentContent(this, 'safety')">Edit</button>
                                <button class="delete-btn" onclick="deleteContent(this, 'safety')">Delete</button>
                            </div>
                            <div class="card-body">
                                <h3>Food Safety Certification</h3>
                                <p>Essential food safety and handling procedures.</p>
                                <div class="development-links"></div>
                            </div>
                        </div>

                        <div class="card" data-id="leadership">
                            <div class="admin-controls">
                                <button class="edit-btn" onclick="editDevelopmentContent(this, 'leadership')">Edit</button>
                                <button class="delete-btn" onclick="deleteContent(this, 'leadership')">Delete</button>
                            </div>
                            <div class="card-body">
                                <h3>Leadership Development</h3>
                                <p>Leadership skills and management training.</p>
                                <div class="development-links"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Benefits Section -->
<section id="benefitsSection" class="section">
    <div class="page-title">
        My Benefits
        <button class="admin-btn admin-only" onclick="addBenefitsContent()">Add Content</button>
    </div>
    
    <div class="cards">
        <!-- Full-Time Benefits -->
        <div class="card benefits-category" data-category="fulltime">
            <div class="card-header">
                <h3>Full-Time Benefits</h3>
            </div>
            <div class="card-body" id="fulltimeBenefits">
                <div class="benefits-item" data-id="health-ft">
                    <div class="admin-controls">
                        <button onclick="editBenefitsItem(this, 'health-ft')">Edit</button>
                        <button onclick="deleteBenefitsItem(this)">Delete</button>
                    </div>
                    <h4>Health Insurance</h4>
                    <p>Comprehensive medical, dental, and vision coverage.</p>
                </div>
                <div class="benefits-item" data-id="retirement-ft">
                    <div class="admin-controls">
                        <button onclick="editBenefitsItem(this, 'retirement-ft')">Edit</button>
                        <button onclick="deleteBenefitsItem(this)">Delete</button>
                    </div>
                    <h4>401(k) Plan</h4>
                    <p>Retirement savings with company matching.</p>
                </div>
                <button class="btn btn-small admin-only" onclick="addBenefitsItem('fulltime')">Add Benefit</button>
            </div>
        </div>

        <!-- Part-Time Benefits -->
        <div class="card benefits-category" data-category="parttime">
            <div class="card-header">
                <h3>Part-Time Benefits</h3>
            </div>
            <div class="card-body" id="parttimeBenefits">
                <div class="benefits-item" data-id="discounts-pt">
                    <div class="admin-controls">
                        <button onclick="editBenefitsItem(this, 'discounts-pt')">Edit</button>
                        <button onclick="deleteBenefitsItem(this)">Delete</button>
                    </div>
                    <h4>Employee Discounts</h4>
                    <p>Generous meal discounts and special offers.</p>
                </div>
                <div class="benefits-item" data-id="flexible-pt">
                    <div class="admin-controls">
                        <button onclick="editBenefitsItem(this, 'flexible-pt')">Edit</button>
                        <button onclick="deleteBenefitsItem(this)">Delete</button>
                    </div>
                    <h4>Flexible Scheduling</h4>
                    <p>Work schedules that fit your lifestyle.</p>
                </div>
                <button class="btn btn-small admin-only" onclick="addBenefitsItem('parttime')">Add Benefit</button>
            </div>
        </div>

        <!-- Manager Benefits -->
        <div class="card benefits-category" data-category="manager">
            <div class="card-header">
                <h3>Manager Benefits</h3>
            </div>
            <div class="card-body" id="managerBenefits">
                <div class="benefits-item" data-id="bonus-mgr">
                    <div class="admin-controls">
                        <button onclick="editBenefitsItem(this, 'bonus-mgr')">Edit</button>
                        <button onclick="deleteBenefitsItem(this)">Delete</button>
                    </div>
                    <h4>Performance Bonuses</h4>
                    <p>Quarterly and annual performance incentives.</p>
                </div>
                <div class="benefits-item" data-id="development-mgr">
                    <div class="admin-controls">
                        <button onclick="editBenefitsItem(this, 'development-mgr')">Edit</button>
                        <button onclick="deleteBenefitsItem(this)">Delete</button>
                    </div>
                    <h4>Leadership Development</h4>
                    <p>Advanced training and career advancement opportunities.</p>
                </div>
                <button class="btn btn-small admin-only" onclick="addBenefitsItem('manager')">Add Benefit</button>
            </div>
        </div>
    </div>
</section>

                <!-- Documents Section -->
                <section id="documentsSection" class="section">
                    <div class="page-title">
                        My Documents
                        <button class="admin-btn" onclick="uploadDocument()">Upload Document</button>
                    </div>
                    
                    <div class="document-categories">
                        <div class="document-category" data-category="forms">
                            <div class="document-category-header">
                                <h3>Forms</h3>
                                <button class="admin-btn admin-only" onclick="uploadDocument()">Upload Document</button>
                            </div>
                            <div class="document-category-body">
                                <ul class="doc-list" id="formsList">
                                    
                                </ul>
                            </div>
                        </div>

                        <div class="document-category" data-category="policy">
                            <div class="document-category-header">
                                <h3>Policy</h3>
                                <button class="admin-btn admin-only" onclick="uploadDocument()">Upload Document</button>
                            </div>
                            <div class="document-category-body">
                                <ul class="doc-list" id="policyList">

                                </ul>
                            </div>
                        </div>

                        <div class="document-category" data-category="tools">
                            <div class="document-category-header">
                                <h3>Tools</h3>
                                <button class="admin-btn admin-only" onclick="uploadDocument()">Upload Document</button>
                            </div>
                            <div class="document-category-body">
                                <ul class="doc-list" id="toolsList">
                                    
                                </ul>
                            </div>
                        </div>

                        <div class="document-category" data-category="handbook">
                            <div class="document-category-header">
                                <h3>Handbook</h3>
                                <button class="admin-btn admin-only" onclick="uploadDocument()">Upload Document</button>
                            </div>
                            <div class="document-category-body">
                                <ul class="doc-list" id="handbookList">
                                
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Photos Section -->
                <section id="photosSection" class="section">
                    <div class="page-title">
                        Photos
                        <button class="admin-btn" onclick="uploadPhotos()">Upload Photos</button>
                    </div>
                    
                    <div class="photo-categories">
                        <div class="photo-category" data-category="team-events">
                            <div class="photo-category-header">
                                <h3>Team Events</h3>
                                <button class="btn btn-small admin-only" onclick="uploadPhotosToCategory('team-events')">Add</button>
                            </div>
                            <div class="photo-category-body">
                                <div class="photos" id="teamEventsList">
                                </div>
                            </div>
                        </div>

                        <div class="photo-category" data-category="south-main">
                            <div class="photo-category-header">
                                <h3>South Main</h3>
                                <button class="btn btn-small admin-only" onclick="uploadPhotosToCategory('south-main')">Add</button>
                            </div>
                            <div class="photo-category-body">
                                <div class="photos" id="southMainList">
                                </div>
                            </div>
                        </div>

                        <div class="photo-category" data-category="union-cross">
                            <div class="photo-category-header">
                                <h3>Union Cross</h3>
                                <button class="btn btn-small admin-only" onclick="uploadPhotosToCategory('union-cross')">Add</button>
                            </div>
                            <div class="photo-category-body">
                                <div class="photos" id="unionCrossList">
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Calendar Section -->
                <section id="calendarSection" class="section">
                    <div class="page-title">
                        Calendar
                        <button class="admin-btn" onclick="addEvent()">Add Event</button>
                    </div>
                    <div class="calendar-tabs">
                        <div class="calendar-tab active" onclick="switchCalendar('marketing')">Marketing Calendar</div>
                        <div class="calendar-tab" onclick="switchCalendar('south-main')">South Main</div>
                        <div class="calendar-tab" onclick="switchCalendar('union-cross')">Union Cross</div>
                    </div>
                   
                    <!-- Marketing Calendar -->
                    <div id="marketing-calendar" class="calendar-content active">
                        <div class="calendar-container">
                            <div class="calendar">
                                <div class="calendar-header">
                                    <button class="calendar-nav" onclick="previousMonth('marketing')">◀</button>
                                    <h3 id="marketingCalendarTitle">July 2025</h3>
                                    <button class="calendar-nav" onclick="nextMonth('marketing')">▶</button>
                                </div>
                                <div class="calendar-grid" id="marketingCalendarGrid">
                                </div>
                            </div>
                            <div class="events-sidebar">
                                <h3>Marketing Events</h3>
                                <div id="marketingEventsList">
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- South Main Calendar -->
                    <div id="south-main-calendar" class="calendar-content">
                        <div class="calendar-container">
                            <div class="calendar">
                                <div class="calendar-header">
                                    <button class="calendar-nav" onclick="previousMonth('south-main')">◀</button>
                                    <h3 id="southMainCalendarTitle">July 2025</h3>
                                    <button class="calendar-nav" onclick="nextMonth('south-main')">▶</button>
                                </div>
                                <div class="calendar-grid" id="southMainCalendarGrid">
                                    <!-- Calendar days will be generated by JavaScript -->
                                </div>
                            </div>
                            <div class="events-sidebar">
                                <h3>South Main Events</h3>
                                <div id="southMainEventsList">
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Union Cross Calendar -->
                    <div id="union-cross-calendar" class="calendar-content">
                        <div class="calendar-container">
                            <div class="calendar">
                                <div class="calendar-header">
                                    <button class="calendar-nav" onclick="previousMonth('union-cross')">◀</button>
                                    <h3 id="unionCrossCalendarTitle">July 2025</h3>
                                    <button class="calendar-nav" onclick="nextMonth('union-cross')">▶</button>
                                </div>
                                <div class="calendar-grid" id="unionCrossCalendarGrid">
                                    <!-- Calendar days will be generated by JavaScript -->
                                </div>
                            </div>
                            <div class="events-sidebar">
                                <h3>Union Cross Events</h3>
                                <div id="unionCrossEventsList">
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- End Calendar Section -->
            </div>
        </main>
    </div>

    <!-- Modal Overlays -->
    
    <!-- Edit Content Modal -->
    <div id="editModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Edit Content</h3>
                <button class="modal-close" onclick="closeModal('editModal')">×</button>
            </div>
            <form id="editForm">
                <div class="form-group">
                    <label class="form-label">Title</label>
                    <input type="text" id="editTitle" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea id="editDescription" class="form-textarea" required></textarea>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('editModal')">Cancel</button>
                    <button type="submit" class="btn">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Development Content Modal -->
    <div id="developmentModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Development Content</h3>
                <button class="modal-close" onclick="closeModal('developmentModal')">×</button>
            </div>
            <form id="developmentForm">
                <div class="form-group">
                    <label class="form-label">Title</label>
                    <input type="text" id="devTitle" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea id="devDescription" class="form-textarea" required></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Web Links (one per line)</label>
                    <textarea id="devLinks" class="form-textarea" placeholder="Enter web links, one per line:&#10;https://example.com - Link Title&#10;https://training.site.com - Training Portal"></textarea>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('developmentModal')">Cancel</button>
                    <button type="submit" class="btn">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Benefits Item Modal -->
    <div id="benefitsModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Benefits Item</h3>
                <button class="modal-close" onclick="closeModal('benefitsModal')">×</button>
            </div>
            <form id="benefitsForm">
                <div class="form-group">
                    <label class="form-label">Title</label>
                    <input type="text" id="benefitsTitle" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea id="benefitsDescription" class="form-textarea" required></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select id="benefitsCategory" class="form-select" required>
                        <option value="fulltime">Full-Time</option>
                        <option value="parttime">Part-Time</option>
                        <option value="manager">Manager</option>
                    </select>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('benefitsModal')">Cancel</button>
                    <button type="submit" class="btn">Save Benefits Item</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Confirm Delete</h3>
                <button class="modal-close" onclick="closeModal('deleteModal')">×</button>
            </div>
            <p>Are you sure you want to delete this item? This action cannot be undone.</p>
            <div class="modal-buttons">
                <button type="button" class="btn btn-cancel" onclick="closeModal('deleteModal')">Cancel</button>
                <button type="button" class="btn" id="confirmDelete">Delete</button>
            </div>
        </div>
    </div>

    <!-- Add Team Member Modal -->
    <div id="teamModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Add Team Member</h3>
                <button class="modal-close" onclick="closeModal('teamModal')">×</button>
            </div>
            <form id="teamForm">
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input type="text" id="teamName" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Position</label>
                    <input type="text" id="teamPosition" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea id="teamDescription" class="form-textarea"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Organization Level</label>
                    <select id="teamLevel" class="form-select" required>
                        <option value="1">Owner/Operator</option>
                        <option value="2">Executive Director</option>
                        <option value="3">Globals</option>
                        <option value="4">Operations Directors</option>
                        <option value="5">Directors</option>
                        <option value="6">Managers</option>
                        <option value="7">Team Leaders</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Headshot Photo</label>
                    <div class="form-file">
                        <input type="file" id="teamPhoto" accept="image/*" onchange="showFilePreview(this, 'teamPhotoPreview', 'teamPhotoText')">
                        <p id="teamPhotoText">Click to select a photo or drag and drop</p>
                        <div id="teamPhotoPreview" class="file-preview" style="display: none;"></div>
                    </div>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('teamModal')">Cancel</button>
                    <button type="submit" class="btn">Add Team Member</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Upload Document Modal -->
    <div id="documentModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Upload Document</h3>
                <button class="modal-close" onclick="closeModal('documentModal')">×</button>
            </div>
            <form id="documentForm">
                <div class="form-group">
                    <label class="form-label">Document Title</label>
                    <input type="text" id="docTitle" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select id="docCategory" class="form-select" required>
                        <option value="forms">Forms</option>
                        <option value="policy">Policy</option>
                        <option value="tools">Tools</option>
                        <option value="handbook">Handbook</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Select File</label>
                    <div class="form-file">
                        <input type="file" id="docFile" accept=".pdf,.doc,.docx,.txt" onchange="showFilePreview(this, 'docFilePreview', 'docFileText')">
                        <p id="docFileText">Click to select a file or drag and drop</p>
                        <div id="docFilePreview" class="file-preview" style="display: none;"></div>
                    </div>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('documentModal')">Cancel</button>
                    <button type="submit" class="btn">Upload Document</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Upload Photos Modal -->
    <div id="photoModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Upload Photos</h3>
                <button class="modal-close" onclick="closeModal('photoModal')">×</button>
            </div>
            <form id="photoForm">
                <div class="form-group">
                    <label class="form-label">Photo Title</label>
                    <input type="text" id="photoTitle" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <input type="text" id="photoDescription" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select id="photoCategory" class="form-select" required>
                        <option value="team-events">Team Events</option>
                        <option value="south-main">South Main</option>
                        <option value="union-cross">Union Cross</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Select Photos</label>
                    <div class="form-file">
                        <input type="file" id="photoFiles" accept="image/*" multiple onchange="showFilePreview(this, 'photoFilesPreview', 'photoFilesText')">
                        <p id="photoFilesText">Click to select photos or drag and drop</p>
                        <div id="photoFilesPreview" class="file-preview" style="display: none;"></div>
                    </div>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('photoModal')">Cancel</button>
                    <button type="submit" class="btn">Upload Photos</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Event Modal -->
    <div id="eventModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Add Event</h3>
                <button class="modal-close" onclick="closeModal('eventModal')">×</button>
            </div>
            <form id="eventForm">
                <div class="form-group">
                    <label class="form-label">Event Title</label>
                    <input type="text" id="eventTitle" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Calendar</label>
                    <select id="eventCalendar" class="form-select" required>
                        <option value="marketing">Marketing Calendar</option>
                        <option value="south-main">South Main</option>
                        <option value="union-cross">Union Cross</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <input type="date" id="eventDate" class="form-input" required>
                </div>
                <div class="time-inputs">
                    <div class="form-group">
                        <label class="form-label">Start Time</label>
                        <input type="time" id="eventStartTime" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">End Time</label>
                        <input type="time" id="eventEndTime" class="form-input">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea id="eventDescription" class="form-textarea" required></textarea>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('eventModal')">Cancel</button>
                    <button type="submit" class="btn">Add Event</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Quick Access Item Modal -->
    <div id="quickModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Quick Access Link</h3>
                <button class="modal-close" onclick="closeModal('quickModal')">×</button>
            </div>
            <form id="quickForm">
                <div class="form-group">
                    <label class="form-label">Icon (Emoji)</label>
                    <input type="text" id="quickIcon" class="form-input" placeholder="🏠" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Label</label>
                    <input type="text" id="quickLabel" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Link To Section</label>
                    <select id="quickSection" class="form-select" required>
                        <option value="">Select Section</option>
                        <option value="home">Home</option>
                        <option value="about">About</option>
                        <option value="team">Team</option>
                        <option value="development">Development</option>
                        <option value="benefits">Benefits</option>
                        <option value="documents">Documents</option>
                        <option value="photos">Photos</option>
                        <option value="calendar">Calendar</option>
                    </select>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('quickModal')">Cancel</button>
                    <button type="submit" class="btn">Save Link</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Announcement Modal -->
    <div id="announcementModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Announcement</h3>
                <button class="modal-close" onclick="closeModal('announcementModal')">×</button>
            </div>
            <form id="announcementForm">
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <input type="date" id="announcementDate" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Title</label>
                    <input type="text" id="announcementTitle" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea id="announcementDescription" class="form-textarea" required></textarea>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('announcementModal')">Cancel</button>
                    <button type="submit" class="btn">Save Announcement</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let currentDeleteElement = null;
        let currentEditElement = null;
        let isEditMode = false;
        
        // Calendar data structure for multiple calendars
        let calendarDates = {
            marketing: new Date(2025, 6, 1),
            'south-main': new Date(2025, 6, 1),
            'union-cross': new Date(2025, 6, 1)
        };
        
        let eventData = {
            marketing: [],
            'south-main': [],
            'union-cross': []
        };
        
        let activeCalendar = 'marketing';

        // Mobile menu toggle
        document.getElementById('mobileMenu').addEventListener('click', function() {
            document.getElementById('nav').classList.toggle('active');
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(e) {
            const nav = document.getElementById('nav');
            const mobileMenu = document.getElementById('mobileMenu');
            
            if (nav.classList.contains('active') && !nav.contains(e.target) && !mobileMenu.contains(e.target)) {
                nav.classList.remove('active');
            }
        });

        // Navigation

        // Add this function anywhere in your <script> tag, before or after showSection
        function goHome() {
            showSection('home');
        }
 // Move these functions to be inside your DOMContentLoaded handler or above the modal HTML
                function logout() {
            // Reset portal state
            document.getElementById('mainPortal').style.display = 'none';
            document.getElementById('loginScreen').style.display = 'flex';
            userRole = null;
        
            // Clear welcome message
            const userInfo = document.querySelector('.user-info');
            userInfo.innerHTML = '';
        
            // Stop autosave if active
            stopAutosave();
        }
        function openPhotoViewer(imgSrc) {
            const modal = document.getElementById('photoViewerModal');
            const img = document.getElementById('photoViewerImg');
            img.src = imgSrc;
            modal.classList.add('active');
        }
        
        function closePhotoViewer() {
            document.getElementById('photoViewerModal').classList.remove('active');
            document.getElementById('photoViewerImg').src = '';
        }
        function showSection(sectionName) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });

            document.getElementById(sectionName + 'Section').classList.add('active');

            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            if (event && event.target && event.target.classList.contains('nav-link')) {
                event.target.classList.add('active');
            }

            document.getElementById('nav').classList.remove('active');
        }

        // Modal Functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            isEditMode = false;
            currentEditElement = null;
        }

        // File Preview Functions
        function showFilePreview(input, previewId, textId) {
            const preview = document.getElementById(previewId);
            const text = document.getElementById(textId);
            const files = input.files;

            if (files.length > 0) {
                preview.style.display = 'block';
                preview.innerHTML = '';
                text.textContent = `${files.length} file(s) selected`;

                Array.from(files).forEach(file => {
                    if (file.type.startsWith('image/')) {
                        const img = document.createElement('img');
                        img.src = URL.createObjectURL(file);
                        img.style.maxWidth = '100px';
                        img.style.maxHeight = '100px';
                        img.style.margin = '5px';
                        img.style.borderRadius = '6px';
                        preview.appendChild(img);
                    } else {
                        const div = document.createElement('div');
                        div.textContent = `📄 ${file.name}`;
                        div.style.margin = '5px';
                        div.style.padding = '5px';
                        div.style.background = '#e9ecef';
                        div.style.borderRadius = '4px';
                        preview.appendChild(div);
                    }
                });
            } else {
                preview.style.display = 'none';
                text.textContent = previewId.includes('photo') ? 'Click to select photos or drag and drop' : 'Click to select a file or drag and drop';
            }
        }

        // Document Functions - FIXED WITH PROPER ONCLICK HANDLERS
        function viewDocument(docId) {
            console.log('Viewing document:', docId); // Debug log
            // Create a new window to display document content
            const newWindow = window.open('', '_blank', 'width=800,height=600,scrollbars=yes');
            newWindow.document.write(`
                <!DOCTYPE html>
                <html>
                    <head>
                        <title>Document Viewer - ${docId}</title>
                        <style>
                            body { 
                                font-family: Arial, sans-serif; 
                                padding: 20px; 
                                line-height: 1.6; 
                            }
                            h1 { color: #DD0033; }
                            .doc-info { 
                                background: #f8f9fa; 
                                padding: 15px; 
                                border: 1px solid #DD0033; 
                                border-radius: 6px; 
                                margin: 20px 0; 
                            }
                        </style>
                    </head>
                    <body>
                        <h1>Document Viewer</h1>
                        <div class="doc-info">
                            <h2>Document: ${docId}</h2>
                            <p><strong>Document ID:</strong> ${docId}</p>
                            <p><strong>Status:</strong> Available for viewing</p>
                            <p><strong>Note:</strong> In a real application, this would display the actual document content.</p>
                        </div>
                        <button onclick="window.close()" style="background: #DD0033; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">Close</button>
                    </body>
                </html>
            `);
            newWindow.document.close();
        }

        function downloadDocument(docId) {
            console.log('Downloading document:', docId); // Debug log
            // Show download notification
            alert(`Downloading document: "${docId}"\n\nIn a real application, the file would be downloaded to your device.`);
            
            // Simulate download by creating a temporary link
            // In a real app, this would link to the actual file
            const tempContent = `Document: ${docId}\nGenerated on: ${new Date().toLocaleDateString()}\n\nThis is a sample document for: ${docId}`;
            const blob = new Blob([tempContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `${docId.replace(/\s+/g, '_')}.txt`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }

        function uploadDocument() {
            isEditMode = false;
            currentEditElement = null;
            openModal('documentModal');
            document.getElementById('docTitle').value = '';
            document.getElementById('docCategory').value = 'forms';
            document.querySelector('#documentModal h3').textContent = 'Upload Document';
        }

        function uploadDocumentToCategory(category) {
            isEditMode = false;
            currentEditElement = null;
            openModal('documentModal');
            document.getElementById('docTitle').value = '';
            document.getElementById('docCategory').value = category;
            document.querySelector('#documentModal h3').textContent = `Upload to ${category}`;
        }

        function editDocument(button, id) {
            isEditMode = true;
            currentEditElement = button.closest('.doc-item');
            const docItem = currentEditElement;
            const title = getTextContent(docItem, '.doc-name', 'Document');
            
            document.getElementById('docTitle').value = title;
            document.querySelector('#documentModal h3').textContent = `Edit Document`;
            
            openModal('documentModal');
        }

        function deleteDocument(button, id) {
            currentDeleteElement = button.closest('.doc-item');
            openModal('deleteModal');
        }

        // Calendar Functions
        function switchCalendar(calendarName) {
            // Update active tab
            document.querySelectorAll('.calendar-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Hide all calendar contents
            document.querySelectorAll('.calendar-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Show selected calendar
            document.getElementById(calendarName + '-calendar').classList.add('active');
            
            activeCalendar = calendarName;
            generateCalendar(calendarName, calendarDates[calendarName]);
        }

        function initializeEventData() {
            // Initialize event data from existing events
            Object.keys(eventData).forEach(calendarType => {
                eventData[calendarType] = [];
                document.querySelectorAll(`.event[data-calendar="${calendarType}"]`).forEach(event => {
                    const date = event.getAttribute('data-date');
                    if (date) {
                        eventData[calendarType].push({ date: date, element: event });
                    }
                });
            });
        }

        function generateCalendar(calendarType, date) {
            const year = date.getFullYear();
            const month = date.getMonth();
            const today = new Date();
            
            const monthNames = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];
            
            // Update title based on calendar type
            let titleId = '';
            let gridId = '';
            
            switch(calendarType) {
                case 'marketing':
                    titleId = 'marketingCalendarTitle';
                    gridId = 'marketingCalendarGrid';
                    break;
                case 'south-main':
                    titleId = 'southMainCalendarTitle';
                    gridId = 'southMainCalendarGrid';
                    break;
                case 'union-cross':
                    titleId = 'unionCrossCalendarTitle';
                    gridId = 'unionCrossCalendarGrid';
                    break;
            }
            
            document.getElementById(titleId).textContent = `${monthNames[month]} ${year}`;
            
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());
            
            const calendarGrid = document.getElementById(gridId);
            calendarGrid.innerHTML = '';
            
            // Add day headers
            const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayHeaders.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'calendar-day';
                dayHeader.style.fontWeight = 'bold';
                dayHeader.style.background = '#f8f9fa';
                dayHeader.textContent = day;
                calendarGrid.appendChild(dayHeader);
            });
            
            // Add calendar days
            for (let i = 0; i < 42; i++) {
                const currentDate = new Date(startDate);
                currentDate.setDate(startDate.getDate() + i);
                
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                
                const dayNumber = document.createElement('div');
                dayNumber.textContent = currentDate.getDate();
                dayElement.appendChild(dayNumber);
                
                if (currentDate.getMonth() !== month) {
                    dayElement.style.color = '#ccc';
                }
                
                // Highlight today with light blue
                if (currentDate.toDateString() === today.toDateString()) {
                    dayElement.classList.add('today');
                }
                
                // Check for events on this date for this calendar
                const dateString = currentDate.toISOString().split('T')[0];
                const eventsOnThisDay = eventData[calendarType] ? eventData[calendarType].filter(event => event.date === dateString) : [];
                
                if (eventsOnThisDay.length > 0) {
                    dayElement.classList.add('has-events');
                    const eventCount = document.createElement('div');
                    eventCount.className = 'event-count';
                    eventCount.textContent = eventsOnThisDay.length;
                    dayElement.appendChild(eventCount);
                }
                
                calendarGrid.appendChild(dayElement);
            }
        }

        function previousMonth(calendarType) {
            calendarDates[calendarType].setMonth(calendarDates[calendarType].getMonth() - 1);
            generateCalendar(calendarType, calendarDates[calendarType]);
        }

        function nextMonth(calendarType) {
            calendarDates[calendarType].setMonth(calendarDates[calendarType].getMonth() + 1);
            generateCalendar(calendarType, calendarDates[calendarType]);
        }

        // Drag and Drop Functions for Team Members
        function allowDrop(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.add('drag-over');
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.getAttribute('data-id'));
            ev.target.classList.add('dragging');
        }

        function drop(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.remove('drag-over');
            
            const data = ev.dataTransfer.getData("text");
            const draggedElement = document.querySelector(`[data-id="${data}"]`);
            
            if (draggedElement) {
                draggedElement.classList.remove('dragging');
                
                // Find the target grid
                const targetGrid = ev.currentTarget.closest('.team-grid') || ev.currentTarget;
                if (targetGrid && targetGrid.classList.contains('team-grid')) {
                    targetGrid.appendChild(draggedElement);
                }
            }
        }

        // Handle drag leave to remove visual feedback
        document.addEventListener('dragleave', function(e) {
            if (e.target.classList.contains('team-grid')) {
                e.target.classList.remove('drag-over');
            }
        });

        // Safer content extraction functions
        function getTextContent(element, selector, fallback = '') {
            const found = element.querySelector(selector);
            return found ? found.textContent.trim() : fallback;
        }

        // Photo Functions
        function uploadPhotos() {
            isEditMode = false;
            currentEditElement = null;
            openModal('photoModal');
            document.getElementById('photoTitle').value = '';
            document.getElementById('photoDescription').value = '';
            document.getElementById('photoCategory').value = 'team-events';
            document.querySelector('#photoModal h3').textContent = 'Upload Photos';
        }

        function uploadPhotosToCategory(category) {
            isEditMode = false;
            currentEditElement = null;
            openModal('photoModal');
            document.getElementById('photoTitle').value = '';
            document.getElementById('photoDescription').value = '';
            document.getElementById('photoCategory').value = category;
            document.querySelector('#photoModal h3').textContent = `Upload to ${category}`;
        }

        function editPhoto(button, id) {
            isEditMode = true;
            currentEditElement = button.closest('.photo-item');
            const photoItem = currentEditElement;
            const title = getTextContent(photoItem, 'h4', 'Photo');
            const description = getTextContent(photoItem, 'p', 'Description');
            
            document.getElementById('photoTitle').value = title;
            document.getElementById('photoDescription').value = description;
            document.querySelector('#photoModal h3').textContent = `Edit Photo`;
            
            openModal('photoModal');
        }

        function deletePhoto(button, id) {
            currentDeleteElement = button.closest('.photo-item');
            openModal('deleteModal');
        }

        // Event Functions
        function addEvent() {
            isEditMode = false;
            currentEditElement = null;
            openModal('eventModal');
            document.getElementById('eventTitle').value = '';
            document.getElementById('eventCalendar').value = activeCalendar;
            document.getElementById('eventDate').value = '';
            document.getElementById('eventStartTime').value = '';
            document.getElementById('eventEndTime').value = '';
            document.getElementById('eventDescription').value = '';
            document.querySelector('#eventModal h3').textContent = 'Add Event';
        }

        function editEvent(button, id) {
            isEditMode = true;
            currentEditElement = button.closest('.event');
            const eventItem = currentEditElement;
            const title = getTextContent(eventItem, '.event-title', 'Event');
            const description = getTextContent(eventItem, 'p', 'Description');
            const dateAttr = eventItem.getAttribute('data-date');
            const calendarAttr = eventItem.getAttribute('data-calendar');
            
            document.getElementById('eventTitle').value = title;
            document.getElementById('eventDescription').value = description;
            document.getElementById('eventCalendar').value = calendarAttr || activeCalendar;
            if (dateAttr) {
                document.getElementById('eventDate').value = dateAttr;
            }
            document.querySelector('#eventModal h3').textContent = `Edit Event`;
            
            openModal('eventModal');
        }

        function deleteEvent(button, id) {
            currentDeleteElement = button.closest('.event');
            openModal('deleteModal');
        }

        // Development Functions
        function editDevelopmentContent(button, id) {
            isEditMode = true;
            currentEditElement = button.closest('.card');
            const card = currentEditElement;
            const title = getTextContent(card, 'h3', 'Training');
            const description = getTextContent(card, 'p', 'Description');
            
            document.getElementById('devTitle').value = title;
            document.getElementById('devDescription').value = description;
            
            // Get existing links
            const linksContainer = card.querySelector('.development-links');
            const existingLinks = Array.from(linksContainer.querySelectorAll('a')).map(link => 
                `${link.href} - ${link.textContent}`
            ).join('\n');
            
            document.getElementById('devLinks').value = existingLinks;
            document.querySelector('#developmentModal h3').textContent = `Edit ${id}`;
            
            openModal('developmentModal');
        }

        // Benefits Functions
        function addBenefitsContent() {
            openModal('benefitsModal');
            document.getElementById('benefitsTitle').value = '';
            document.getElementById('benefitsDescription').value = '';
            document.getElementById('benefitsCategory').value = 'fulltime';
            isEditMode = false;
        }

        function addBenefitsItem(category) {
            openModal('benefitsModal');
            document.getElementById('benefitsTitle').value = '';
            document.getElementById('benefitsDescription').value = '';
            document.getElementById('benefitsCategory').value = category;
            isEditMode = false;
        }

        function editBenefitsItem(button, id) {
            isEditMode = true;
            currentEditElement = button.closest('.benefits-item');
            const item = currentEditElement;
            const title = getTextContent(item, 'h4', 'Benefit');
            const description = getTextContent(item, 'p', 'Description');
            const category = item.closest('.benefits-category').dataset.category;
            
            document.getElementById('benefitsTitle').value = title;
            document.getElementById('benefitsDescription').value = description;
            document.getElementById('benefitsCategory').value = category;
            
            openModal('benefitsModal');
        }

        function deleteBenefitsItem(button) {
            currentDeleteElement = button.closest('.benefits-item');
            openModal('deleteModal');
        }

        // All other existing functions remain the same...
        // Content Functions
        function addContent(section) {
            isEditMode = false;
            currentEditElement = null;
            openModal('editModal');
            document.getElementById('editTitle').value = '';
            document.getElementById('editDescription').value = '';
            document.querySelector('#editModal h3').textContent = `Add Content to ${section}`;
        }

        function editContent(button, id) {
            isEditMode = true;
            currentEditElement = button.closest('.card');
            const card = currentEditElement;
            const title = getTextContent(card, 'h3', 'Untitled');
            const cardContent = card.querySelector('.card-header, .card-body');
            const description = getTextContent(cardContent, 'p', 'No description');
            
            document.getElementById('editTitle').value = title;
            document.getElementById('editDescription').value = description;
            document.querySelector('#editModal h3').textContent = `Edit ${id}`;
            
            openModal('editModal');
        }

        function deleteContent(button, id) {
            currentDeleteElement = button.closest('.card, .doc-item, .photo-item, .event');
            openModal('deleteModal');
        }

        // Team Functions
        function addTeamMember() {
            isEditMode = false;
            currentEditElement = null;
            openModal('teamModal');
            document.getElementById('teamName').value = '';
            document.getElementById('teamPosition').value = '';
            document.getElementById('teamDescription').value = '';
            document.getElementById('teamLevel').value = '6';
            document.querySelector('#teamModal h3').textContent = 'Add Team Member';
        }

        function editTeamMember(button, id) {
            isEditMode = true;
            currentEditElement = button.closest('.card');
            const card = currentEditElement;
            const name = getTextContent(card, 'h3', 'Team Member');
            const position = getTextContent(card, 'p', 'Position');
            
            document.getElementById('teamName').value = name;
            document.getElementById('teamPosition').value = position;
            document.getElementById('teamDescription').value = '';
            
            // Find current level
            const currentLevel = card.closest('.org-level').dataset.level;
            document.getElementById('teamLevel').value = currentLevel;
            
            document.querySelector('#teamModal h3').textContent = `Edit ${id}`;
            
            openModal('teamModal');
        }

        function deleteTeamMember(button, id) {
            currentDeleteElement = button.closest('.card');
            openModal('deleteModal');
        }

        // Quick Access Functions
        function editQuickAccess(button) {
            editContent(button, 'quick-access');
        }

        function addQuickItem() {
            isEditMode = false;
            currentEditElement = null;
            openModal('quickModal');
            document.getElementById('quickIcon').value = '';
            document.getElementById('quickLabel').value = '';
            document.getElementById('quickSection').value = '';
            document.querySelector('#quickModal h3').textContent = 'Add Quick Access Link';
        }

        function editQuickItem(button, id) {
            isEditMode = true;
            currentEditElement = button.closest('.quick-item');
            const item = currentEditElement;
            const icon = getTextContent(item, '.icon', '🏠');
            const label = getTextContent(item, 'div:last-child', 'Link');
            
            document.getElementById('quickIcon').value = icon;
            document.getElementById('quickLabel').value = label;
            document.getElementById('quickSection').value = id;
            document.querySelector('#quickModal h3').textContent = `Edit Quick Link`;
            
            openModal('quickModal');
        }

        function deleteQuickItem(button) {
            currentDeleteElement = button.closest('.quick-item');
            openModal('deleteModal');
        }

        // Announcement Functions
        function addAnnouncement() {
            isEditMode = false;
            currentEditElement = null;
            openModal('announcementModal');
            document.getElementById('announcementDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('announcementTitle').value = '';
            document.getElementById('announcementDescription').value = '';
            document.querySelector('#announcementModal h3').textContent = 'Add Announcement';
        }

        function editAnnouncement(button, id) {
            isEditMode = true;
            currentEditElement = button.closest('.announcement-item');
            const item = currentEditElement;
            const title = getTextContent(item, '.event-title', 'Announcement');
            const description = getTextContent(item, 'p', 'Description');
            
            document.getElementById('announcementDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('announcementTitle').value = title;
            document.getElementById('announcementDescription').value = description;
            document.querySelector('#announcementModal h3').textContent = `Edit Announcement`;
            
            openModal('announcementModal');
        }

        function deleteAnnouncement(button) {
            currentDeleteElement = button.closest('.announcement-item');
            openModal('deleteModal');
        }

        // Other Functions
        function startTraining(course) {
            // Training functionality would go here
        }

        function viewPhoto(photo) {
            // Photo viewing functionality would go here
        }

        // Form Submissions
        document.addEventListener('DOMContentLoaded', function() {
                 // ...existing code...
        
       
        
        // ...existing code...
            // Initialize calendar and event data
            initializeEventData();
            generateCalendar('marketing', calendarDates.marketing);

            // Edit Form
            document.getElementById('editForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const title = document.getElementById('editTitle').value;
                const description = document.getElementById('editDescription').value;
                
                if (isEditMode && currentEditElement) {
                    const h3 = currentEditElement.querySelector('h3');
                    const p = currentEditElement.querySelector('.card-header p, .card-body p');
                    
                    if (h3) h3.textContent = title;
                    if (p) p.textContent = description;
                } else {
                    const activeSection = document.querySelector('.section.active');
                    const cardsContainer = activeSection.querySelector('.cards');
                    if (cardsContainer) {
                        const newCard = document.createElement('div');
                        newCard.className = 'card';
                        newCard.setAttribute('data-id', 'new-' + Date.now());
                        newCard.innerHTML = `
                            <div class="admin-controls">
                                <button class="edit-btn" onclick="editContent(this, 'new')">Edit</button>
                                <button class="delete-btn" onclick="deleteContent(this, 'new')">Delete</button>
                            </div>
                            <div class="card-body">
                                <h3>${title}</h3>
                                <p>${description}</p>
                            </div>
                        `;
                        cardsContainer.appendChild(newCard);
                    }
                }
                closeModal('editModal');
            });

            // Development Form
            document.getElementById('developmentForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const title = document.getElementById('devTitle').value;
                const description = document.getElementById('devDescription').value;
                const links = document.getElementById('devLinks').value;
                
                if (isEditMode && currentEditElement) {
                    const h3 = currentEditElement.querySelector('h3');
                    const p = currentEditElement.querySelector('p');
                    const linksContainer = currentEditElement.querySelector('.development-links');
                    
                    if (h3) h3.textContent = title;
                    if (p) p.textContent = description;
                    
                    // Update links
                    linksContainer.innerHTML = '';
                    if (links.trim()) {
                        links.split('\n').forEach(link => {
                            const [url, linkText] = link.split(' - ');
                            if (url && linkText) {
                                const linkElement = document.createElement('a');
                                linkElement.href = url.trim();
                                linkElement.textContent = linkText.trim();
                                linkElement.target = '_blank';
                                linkElement.className = 'btn btn-small';
                                linkElement.style.display = 'inline-block';
                                linkElement.style.margin = '5px';
                                linksContainer.appendChild(linkElement);
                            }
                        });
                    }
                }
                closeModal('developmentModal');
            });
                        // Autosave feature for admin mode
            let autosaveInterval = null;
            
            function startAutosave() {
                if (userRole === 'admin') {
                    autosaveInterval = setInterval(() => {
                        autosaveChanges();
                    }, 5000); // Autosave every 5 seconds
                }
            }
            
            function stopAutosave() {
                if (autosaveInterval) {
                    clearInterval(autosaveInterval);
                    autosaveInterval = null;
                }
            }
            
            function autosaveChanges() {
                console.log('Autosaving changes...');
                
                // Collect changes from various sections
                const changes = {
                    homeContent: collectSectionChanges('homeCards'),
                    aboutContent: collectSectionChanges('aboutCards'),
                    teamContent: collectTeamChanges(),
                    developmentContent: collectSectionChanges('developmentCards'),
                    benefitsContent: collectBenefitsChanges(),
                    documentsContent: collectDocumentsChanges(),
                    photosContent: collectPhotosChanges(),
                    calendarEvents: collectCalendarChanges()
                };
            
                // Simulate saving changes (replace with actual API call or backend logic)
                console.log('Saved changes:', changes);
            }
            
            function collectSectionChanges(sectionId) {
                const section = document.getElementById(sectionId);
                if (!section) return [];
                return Array.from(section.querySelectorAll('.card')).map(card => ({
                    id: card.getAttribute('data-id'),
                    title: getTextContent(card, 'h3'),
                    description: getTextContent(card, 'p')
                }));
            }
            
            function collectTeamChanges() {
                return Array.from(document.querySelectorAll('.team-member')).map(member => ({
                    id: member.getAttribute('data-id'),
                    name: getTextContent(member, 'h3'),
                    position: getTextContent(member, 'p'),
                    level: member.closest('.org-level').getAttribute('data-level')
                }));
            }
            
            function collectBenefitsChanges() {
                return Array.from(document.querySelectorAll('.benefits-item')).map(item => ({
                    id: item.getAttribute('data-id'),
                    title: getTextContent(item, 'h4'),
                    description: getTextContent(item, 'p'),
                    category: item.closest('.benefits-category').getAttribute('data-category')
                }));
            }
            
            function collectDocumentsChanges() {
                return Array.from(document.querySelectorAll('.doc-item')).map(doc => ({
                    id: doc.getAttribute('data-id'),
                    title: getTextContent(doc, '.doc-name'),
                    category: doc.closest('.document-category').getAttribute('data-category')
                }));
            }
            
            function collectPhotosChanges() {
                return Array.from(document.querySelectorAll('.photo-item')).map(photo => ({
                    id: photo.getAttribute('data-id'),
                    title: getTextContent(photo, 'h4'),
                    description: getTextContent(photo, 'p'),
                    category: photo.closest('.photo-category').getAttribute('data-category')
                }));
            }
            
            function collectCalendarChanges() {
                const events = [];
                Object.keys(eventData).forEach(calendarType => {
                    eventData[calendarType].forEach(event => {
                        events.push({
                            id: event.element.getAttribute('data-id'),
                            title: getTextContent(event.element, '.event-title'),
                            description: getTextContent(event.element, 'p'),
                            date: event.element.getAttribute('data-date'),
                            calendar: calendarType
                        });
                    });
                });
                return events;
            }
            
            // Start autosave when admin logs in
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                if (userRole === 'admin') {
                    startAutosave();
                }
            });
            
            // Stop autosave when leaving the portal
            window.addEventListener('beforeunload', function() {
                stopAutosave();
            });
let userRole = null; // "admin" or "team"
function setReadonlyMode(isReadonly) {
    // Hide admin controls if readonly
    document.querySelectorAll('.admin-controls').forEach(el => {
        el.style.display = isReadonly ? 'none' : '';
    });
    // Hide admin badge if readonly
    const adminBadge = document.querySelector('.admin-badge');
    if (adminBadge) adminBadge.style.display = isReadonly ? 'none' : '';
    // Hide admin buttons
    document.querySelectorAll('.admin-btn').forEach(btn => {
        btn.style.display = isReadonly ? 'none' : '';
    });
    // Hide all admin-only add/upload buttons
    document.querySelectorAll('.admin-only').forEach(btn => {
        btn.style.display = isReadonly ? 'none' : '';
    });
}


document.getElementById('mainPortal').style.display = 'none';

document.getElementById('loginForm').addEventListener('submit', async function (e) {
    e.preventDefault();
    const username = document.getElementById('loginUsername').value.trim();
    const password = document.getElementById('loginPassword').value.trim();
    const errorDiv = document.getElementById('loginError');
    let valid = false;

    // Fetch IP address
    const ipAddress = await fetchIPAddress();

    // Team Member
    if (
        username.toLowerCase() === 'kvillecfa' &&
        (password === '1248' || password === '4772')
    ) {
        userRole = 'team';
        valid = true;
    }
    // Admin
    if (
        username.toLowerCase() === 'admin' &&
        password === 'Asdf2025!'
    ) {
        userRole = 'admin';
        valid = true;
    }
   if (valid) {
    document.getElementById('loginScreen').style.display = 'none';
    document.getElementById('mainPortal').style.display = '';

    // Set welcome message based on role
    const userInfo = document.querySelector('.user-info');
    if (userRole === 'admin') {
        userInfo.innerHTML = `
            <span class="admin-badge">Admin</span>
            <span>Welcome, Admin!</span>
        `;
    } else {
        userInfo.innerHTML = `
            <span>Welcome, Team Member!</span>
        `;
    }
    setReadonlyMode(userRole === 'team');
} else {
    errorDiv.textContent = 'Invalid username or password.';
    errorDiv.style.display = 'block';
}
});

// Function to fetch IP address
async function fetchIPAddress() {
    try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        return data.ip;
    } catch (error) {
        console.error('Failed to fetch IP address:', error);
        return 'Unknown IP';
    }
}


document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const username = document.getElementById('loginUsername').value.trim();
    const password = document.getElementById('loginPassword').value.trim();
    const errorDiv = document.getElementById('loginError');
    let valid = false;

    // Team Member
    if (
        username.toLowerCase() === 'kvillecfa' &&
        (password === '1248' || password === '4772')
    ) {
        userRole = 'team';
        valid = true;
    }
    // Admin
    if (
        username.toLowerCase() === 'admin' &&
        password === 'Asdf2025!'
    ) {
        userRole = 'admin';
        valid = true;
    }

    if (valid) {
        document.getElementById('loginScreen').style.display = 'none';
        document.getElementById('mainPortal').style.display = '';

        // Set welcome message based on role
        const userInfo = document.querySelector('.user-info');
        if (userRole === 'admin') {
            userInfo.innerHTML = `
                <span class="admin-badge">Admin</span>
                <span>Welcome, Admin!</span>
            `;
        } else {
            userInfo.innerHTML = `
                <span>Welcome, Team Member!</span>
            `;
        }

        setReadonlyMode(userRole === 'team');
    } else {
        errorDiv.textContent = 'Invalid username or password.';
        errorDiv.style.display = 'block';
    }
});

// Prevent admin controls from showing if user is not admin (on page load)
setReadonlyMode(true);
// Full Screen Photo Viewer Functions
function openPhotoViewer(imgSrc) {
    const modal = document.getElementById('photoViewerModal');
    const img = document.getElementById('photoViewerImg');
    img.src = imgSrc;
    modal.classList.add('active');
}

function closePhotoViewer() {
    document.getElementById('photoViewerModal').classList.remove('active');
    document.getElementById('photoViewerImg').src = '';
}

// Close on overlay click
document.getElementById('photoViewerModal').addEventListener('click', function(e) {
    if (e.target === this) closePhotoViewer();
});

// Delegate click for all .photo-item (works for dynamically added photos too)
document.addEventListener('click', function(e) {
    const photoItem = e.target.closest('.photo-item');
    if (photoItem && !e.target.closest('.admin-controls')) {
        // Try to get image from .photo-placeholder background or <img>
        let imgUrl = '';
        const placeholder = photoItem.querySelector('.photo-placeholder');
        if (placeholder && placeholder.style.backgroundImage && placeholder.style.backgroundImage !== 'none') {
            imgUrl = placeholder.style.backgroundImage.slice(5, -2); // remove url("...") wrapper
        } else {
            const img = photoItem.querySelector('img');
            if (img) imgUrl = img.src;
        }
        if (imgUrl) openPhotoViewer(imgUrl);
    }
});
            // Benefits Form
            document.getElementById('benefitsForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const title = document.getElementById('benefitsTitle').value;
                const description = document.getElementById('benefitsDescription').value;
                const category = document.getElementById('benefitsCategory').value;
                
                if (isEditMode && currentEditElement) {
                    const h4 = currentEditElement.querySelector('h4');
                    const p = currentEditElement.querySelector('p');
                    
                    if (h4) h4.textContent = title;
                    if (p) p.textContent = description;
                    
                    // Move to correct category if changed
                    const targetContainer = document.getElementById(category + 'Benefits');
                    if (targetContainer && !targetContainer.contains(currentEditElement)) {
                        targetContainer.insertBefore(currentEditElement, targetContainer.lastElementChild);
                    }
                } else {
                    // Add new benefits item
                    const targetContainer = document.getElementById(category + 'Benefits');
                    const newItem = document.createElement('div');
                    newItem.className = 'benefits-item';
                    newItem.setAttribute('data-id', 'benefit-' + Date.now());
                    newItem.innerHTML = `
                        <div class="admin-controls">
                            <button onclick="editBenefitsItem(this, 'new')">Edit</button>
                            <button onclick="deleteBenefitsItem(this)">Delete</button>
                        </div>
                        <h4>${title}</h4>
                        <p>${description}</p>
                    `;
                    targetContainer.insertBefore(newItem, targetContainer.lastElementChild);
                }
                closeModal('benefitsModal');
            });

            // Team Form
            document.getElementById('teamForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const name = document.getElementById('teamName').value;
                const position = document.getElementById('teamPosition').value;
                const description = document.getElementById('teamDescription').value;
                const level = document.getElementById('teamLevel').value;
                const photoFile = document.getElementById('teamPhoto').files[0];
                
                if (isEditMode && currentEditElement) {
                    const h3 = currentEditElement.querySelector('h3');
                    const p = currentEditElement.querySelector('p');
                    const avatar = currentEditElement.querySelector('.team-avatar');
                    
                    if (h3) h3.textContent = name;
                    if (p) p.textContent = position;
                    
                    if (photoFile && avatar) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            avatar.innerHTML = `<img src="${e.target.result}" alt="${name}">`;
                        };
                        reader.readAsDataURL(photoFile);
                    }
                    
                    // Move to correct level
                    const targetGrid = document.querySelector(`[data-level="${level}"] .team-grid`);
                    if (targetGrid && !targetGrid.contains(currentEditElement)) {
                        targetGrid.appendChild(currentEditElement);
                    }
                } else {
                    // Add new team member
                    const targetGrid = document.querySelector(`[data-level="${level}"] .team-grid`);
                    const newMember = document.createElement('div');
                    newMember.className = 'card team-member';
                    newMember.setAttribute('draggable', 'true');
                    newMember.setAttribute('data-id', 'team-' + Date.now());
                    newMember.setAttribute('ondragstart', 'drag(event)');
                    
                    const avatarContent = photoFile ? 
                        `<img src="${URL.createObjectURL(photoFile)}" alt="${name}">` : 
                        name.substring(0, 2).toUpperCase();
                    
                    newMember.innerHTML = `
                        <div class="admin-controls">
                            <button class="edit-btn" onclick="editTeamMember(this, 'new')">Edit</button>
                            <button class="delete-btn" onclick="deleteTeamMember(this, 'new')">Delete</button>
                        </div>
                        <div class="card-body" style="text-align: center;">
                            <div class="team-avatar">${avatarContent}</div>
                            <h3>${name}</h3>
                            <p>${position}</p>
                        </div>
                    `;
                    targetGrid.appendChild(newMember);
                }
                closeModal('teamModal');
            });

            // Document Form
            document.getElementById('documentForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const title = document.getElementById('docTitle').value;
                const category = document.getElementById('docCategory').value;
                const file = document.getElementById('docFile').files[0];
                
                if (isEditMode && currentEditElement) {
                    const docName = currentEditElement.querySelector('.doc-name');
                    if (docName) docName.textContent = title;
                } else {
                    // Add to correct category
                    let listId = '';
                    switch(category) {
                        case 'forms': listId = 'formsList'; break;
                        case 'policy': listId = 'policyList'; break;
                        case 'tools': listId = 'toolsList'; break;
                        case 'handbook': listId = 'handbookList'; break;
                    }
                    
                    const docList = document.getElementById(listId);
                    const newDoc = document.createElement('li');
                    newDoc.className = 'doc-item';
                    newDoc.setAttribute('data-id', 'doc-' + Date.now());
                    newDoc.innerHTML = `
                        <span class="doc-name">${title}</span>
                        <div class="doc-actions">
                            <button class="btn btn-small" type="button" onclick="viewDocument('${title}')">View</button>
                            <button class="btn btn-small btn-outline" type="button" onclick="downloadDocument('${title}')">Download</button>
                        </div>
                        <div class="admin-controls">
                            <button onclick="editDocument(this, 'new')">Edit</button>
                            <button onclick="deleteDocument(this, 'new')">Delete</button>
                        </div>
                    `;
                    docList.appendChild(newDoc);
                }
                closeModal('documentModal');
            });

            // Photo Form
            document.getElementById('photoForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const title = document.getElementById('photoTitle').value;
                const description = document.getElementById('photoDescription').value;
                const category = document.getElementById('photoCategory').value;
                const files = document.getElementById('photoFiles').files;
                
                if (isEditMode && currentEditElement) {
                    const h4 = currentEditElement.querySelector('h4');
                    const p = currentEditElement.querySelector('p');
                    if (h4) h4.textContent = title;
                    if (p) p.textContent = description;
                } else {
                    // Add to correct category
                    let listId = '';
                    switch(category) {
                        case 'team-events': listId = 'teamEventsList'; break;
                        case 'south-main': listId = 'southMainList'; break;
                        case 'union-cross': listId = 'unionCrossList'; break;
                    }
                    
                    const photosList = document.getElementById(listId);
                    Array.from(files).forEach((file, index) => {
                        const newPhoto = document.createElement('div');
                        newPhoto.className = 'photo-item';
                        newPhoto.setAttribute('data-id', 'photo-' + Date.now() + '-' + index);
                        
                        const photoUrl = URL.createObjectURL(file);
                        newPhoto.innerHTML = `
                            <div class="admin-controls">
                                <button onclick="editPhoto(this, 'new')">Edit</button>
                                <button onclick="deletePhoto(this, 'new')">Delete</button>
                            </div>
                            <div class="photo-placeholder" style="background-image: url('${photoUrl}'); background-size: cover; background-position: center;">
                            </div>
                            <div class="photo-caption">
                                <h4>${title}</h4>
                                <p>${description}</p>
                            </div>
                        `;
                        photosList.appendChild(newPhoto);
                    });
                }
                closeModal('photoModal');
            });

            // Event Form
            document.getElementById('eventForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const title = document.getElementById('eventTitle').value;
                const calendarType = document.getElementById('eventCalendar').value;
                const date = document.getElementById('eventDate').value;
                const startTime = document.getElementById('eventStartTime').value;
                const endTime = document.getElementById('eventEndTime').value;
                const description = document.getElementById('eventDescription').value;
                
                if (isEditMode && currentEditElement) {
                    const eventTitle = currentEditElement.querySelector('.event-title');
                    const eventDate = currentEditElement.querySelector('.event-date');
                    const eventDesc = currentEditElement.querySelector('p');
                    
                    if (eventTitle) eventTitle.textContent = title;
                    if (eventDate) eventDate.textContent = new Date(date).toLocaleDateString();
                    if (eventDesc) eventDesc.textContent = description;
                    
                    // Update attributes
                    currentEditElement.setAttribute('data-date', date);
                    currentEditElement.setAttribute('data-calendar', calendarType);
                    
                    // Update event data
                    const oldCalendar = activeCalendar;
                    const eventIndex = eventData[oldCalendar] ? eventData[oldCalendar].findIndex(event => event.element === currentEditElement) : -1;
                    if (eventIndex !== -1) {
                        eventData[oldCalendar].splice(eventIndex, 1);
                    }
                    
                    if (!eventData[calendarType]) eventData[calendarType] = [];
                    eventData[calendarType].push({ date: date, element: currentEditElement });
                    
                    // Move to correct events list
                    let targetListId = '';
                    switch(calendarType) {
                        case 'marketing': targetListId = 'marketingEventsList'; break;
                        case 'south-main': targetListId = 'southMainEventsList'; break;
                        case 'union-cross': targetListId = 'unionCrossEventsList'; break;
                    }
                    
                    const targetList = document.getElementById(targetListId);
                    if (targetList && !targetList.contains(currentEditElement)) {
                        targetList.appendChild(currentEditElement);
                    }
                } else {
                    // Add new event to correct calendar
                    let targetListId = '';
                    switch(calendarType) {
                        case 'marketing': targetListId = 'marketingEventsList'; break;
                        case 'south-main': targetListId = 'southMainEventsList'; break;
                        case 'union-cross': targetListId = 'unionCrossEventsList'; break;
                    }
                    
                    const eventsList = document.getElementById(targetListId);
                    const newEvent = document.createElement('div');
                    newEvent.className = 'event';
                    newEvent.setAttribute('data-id', 'event-' + Date.now());
                    newEvent.setAttribute('data-date', date);
                    newEvent.setAttribute('data-calendar', calendarType);
                    newEvent.innerHTML = `
                        <div class="admin-controls">
                            <button onclick="editEvent(this, 'new')">Edit</button>
                            <button onclick="deleteEvent(this, 'new')">Delete</button>
                        </div>
                        <div class="event-date">${new Date(date).toLocaleDateString()}</div>
                        <div class="event-title">${title}</div>
                        <p>${description}</p>
                    `;
                    eventsList.appendChild(newEvent);
                    
                    // Add to event data
                    if (!eventData[calendarType]) eventData[calendarType] = [];
                    eventData[calendarType].push({ date: date, element: newEvent });
                }
                
                // Regenerate calendar to show event highlighting
                generateCalendar(calendarType, calendarDates[calendarType]);
                closeModal('eventModal');
            });

            // Quick Access Form
            document.getElementById('quickForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const icon = document.getElementById('quickIcon').value;
                const label = document.getElementById('quickLabel').value;
                const section = document.getElementById('quickSection').value;
                
                if (isEditMode && currentEditElement) {
                    const iconEl = currentEditElement.querySelector('.icon');
                    const labelEl = currentEditElement.querySelector('div:last-child');
                    
                    if (iconEl) iconEl.textContent = icon;
                    if (labelEl) labelEl.textContent = label;
                    
                    currentEditElement.onclick = () => showSection(section);
                    currentEditElement.setAttribute('data-id', section);
                } else {
                    const quickGrid = document.getElementById('quickGrid');
                    const newItem = document.createElement('div');
                    newItem.className = 'quick-item';
                    newItem.setAttribute('data-id', section);
                    newItem.onclick = () => showSection(section);
                    newItem.innerHTML = `
                        <div class="admin-controls">
                            <button onclick="event.stopPropagation(); editQuickItem(this, '${section}')">Edit</button>
                            <button onclick="event.stopPropagation(); deleteQuickItem(this)">Delete</button>
                        </div>
                        <div class="icon">${icon}</div>
                        <div>${label}</div>
                    `;
                    quickGrid.appendChild(newItem);
                }
                closeModal('quickModal');
            });

            // Announcement Form
            document.getElementById('announcementForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const date = document.getElementById('announcementDate').value;
                const title = document.getElementById('announcementTitle').value;
                const description = document.getElementById('announcementDescription').value;
                
                if (isEditMode && currentEditElement) {
                    const titleEl = currentEditElement.querySelector('.event-title');
                    const dateEl = currentEditElement.querySelector('.event-date');
                    const descEl = currentEditElement.querySelector('p');
                    
                    if (titleEl) titleEl.textContent = title;
                    if (dateEl) dateEl.textContent = new Date(date).toLocaleDateString();
                    if (descEl) descEl.textContent = description;
                } else {
                    const announcementsList = document.getElementById('announcementsList');
                    const newAnnouncement = document.createElement('div');
                    newAnnouncement.className = 'announcement-item';
                    newAnnouncement.setAttribute('data-id', 'ann-' + Date.now());
                    newAnnouncement.innerHTML = `
                        <div class="admin-controls">
                            <button onclick="editAnnouncement(this, 'new')">Edit</button>
                            <button onclick="deleteAnnouncement(this)">Delete</button>
                        </div>
                        <div class="event-date">${new Date(date).toLocaleDateString()}</div>
                        <div class="event-title">${title}</div>
                        <p>${description}</p>
                    `;
                    announcementsList.appendChild(newAnnouncement);
                }
                closeModal('announcementModal');
            });

            // Delete Confirmation
            document.getElementById('confirmDelete').addEventListener('click', function() {
                if (currentDeleteElement) {
                    // If it's an event, remove from eventData
                    if (currentDeleteElement.classList.contains('event')) {
                        const calendarType = currentDeleteElement.getAttribute('data-calendar') || activeCalendar;
                        const eventIndex = eventData[calendarType] ? eventData[calendarType].findIndex(event => event.element === currentDeleteElement) : -1;
                        if (eventIndex !== -1) {
                            eventData[calendarType].splice(eventIndex, 1);
                            generateCalendar(calendarType, calendarDates[calendarType]); // Regenerate calendar
                        }
                    }
                    
                    currentDeleteElement.classList.add('deleting');
                    setTimeout(() => {
                        currentDeleteElement.remove();
                        currentDeleteElement = null;
                    }, 400);
                }
                closeModal('deleteModal');
            });

            // Close modals when clicking overlay
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                    }
                });
            });
        });
    </script>
        <!-- Add this just before the closing </body> tag -->
            <div id="photoViewerModal" class="modal-overlay" style="background: rgba(0,0,0,0.9); z-index: 2000;">
        <div class="modal" style="background: transparent; border: none; box-shadow: none; padding: 0; max-width: 95vw; max-height: 95vh; display: flex; align-items: center; justify-content: center; position: relative;"
             onclick="event.stopPropagation()">
            <img id="photoViewerImg" src="" alt="Full Size Photo" style="max-width: 90vw; max-height: 80vh; border-radius: 12px; box-shadow: 0 8px 40px rgba(0,0,0,0.7); background: white;">
            <button class="modal-close" style="position: absolute; top: 20px; right: 30px; font-size: 40px; color: white; background: rgba(0,0,0,0.5);" onclick="closePhotoViewer(); event.stopPropagation();">×</button>
        </div>
    </div>

</body>
</html>